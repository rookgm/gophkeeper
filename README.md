# Table of Contents
1. [Описание](#описание)
2. [Техническое задание](#техническое-задание)
3. [Сводное HTTP API](#сводное-http-api)
4. [Клиент](#клиент)

# Описание
GophKeeper представляет собой клиент-серверную систему, позволяющую пользователю надёжно и безопасно хранить логины, пароли, бинарные данные и прочую приватную информацию.

# Техническое задание
## Менеджер паролей GophKeeper

### Общие требования
GophKeeper представляет собой клиент-серверную систему, позволяющую пользователю надёжно и безопасно хранить логины, пароли, бинарные данные и прочую приватную информацию.

Сервер должен реализовывать следующую бизнес-логику:
- регистрация, аутентификация и авторизация пользователей;
- хранение приватных данных;
- синхронизация данных между несколькими авторизованными клиентами одного владельца;
- передача приватных данных владельцу по запросу.

Клиент должен реализовывать следующую бизнес-логику:
- аутентификация и авторизация пользователей на удалённом сервере;
- доступ к приватным данным по запросу.

Функции, реализация которых остаётся на усмотрение исполнителя:
- создание, редактирование и удаление данных на стороне сервера или клиента;
- формат регистрации нового пользователя;
- выбор хранилища и формат хранения данных;
- обеспечение безопасности передачи и хранения данных;
- протокол взаимодействия клиента и сервера;
- механизмы аутентификации пользователя и авторизации доступа к информации.

Дополнительные требования:
- клиент должен распространяться в виде CLI-приложения с возможностью запуска на платформах Windows, Linux и Mac OS;
- клиент должен давать пользователю возможность получить информацию о версии и дате сборки бинарного файла клиента.

### Типы хранимой информации
- пары логин/пароль;
- произвольные текстовые данные;
- произвольные бинарные данные;
- данные банковских карт.

Для любых данных должна быть возможность хранения произвольной текстовой метаинформации (принадлежность данных к веб-сайту, личности или банку, списки одноразовых кодов активации и прочее).

### Абстрактная схема взаимодействия с системой
Ниже описаны базовые сценарии взаимодействия пользователя с системой. Они не являются исчерпывающими — решение отдельных сценариев (например, разрешение конфликтов данных на сервере) остаётся на усмотрение исполнителя.

Для нового пользователя:
1. Пользователь получает клиент под необходимую ему платформу.
2. Пользователь проходит процедуру первичной регистрации.
3. Пользователь добавляет в клиент новые данные.
4. Клиент синхронизирует данные с сервером.

### Для существующего пользователя:
1. Пользователь получает клиент под необходимую ему платформу.
2. Пользователь проходит процедуру аутентификации.
3. Клиент синхронизирует данные с сервером.
4. Пользователь запрашивает данные.
5. Клиент отображает данные для пользователя.

### Тестирование и документация
Код всей системы должен быть покрыт юнит-тестами не менее чем на 80%. Каждая экспортированная функция, тип, переменная, а также пакет системы должны содержать исчерпывающую документацию.

### Необязательные функции
Перечисленные ниже функции необязательны к имплементации, однако позволяют лучше оценить степень экспертизы исполнителя. Исполнитель может реализовать любое количество из представленных ниже функций на свой выбор:
- поддержка данных типа OTP (one time password);
- поддержка терминального интерфейса (TUI — terminal user interface);
- использование бинарного протокола;
- наличие функциональных и/или интеграционных тестов;
- описание протокола взаимодействия клиента и сервера в формате Swagger.

# Сводное HTTP API

Менеджер паролей GophKeeper предоставляет следующие HTTP-хендлеры:

- POST /api/user/register — регистрация пользователя;
- POST /api/user/login — аутентификация пользователя;
- POST /api/user/secrets — создание секрета;
- GET /api/user/secrets/{id} — получение списка секретов;
- PUT /api/user/secrets/{id} — обновление секрета;
- DELETE /api/user/secrets/{id} — удаление секрета;
- POST /api/user/secrets/sync - синхронизация секретов.

### Регистрация пользователя

Хендлер: **POST /api/user/register**.

Регистрация производится по паре логин/пароль. Каждый логин должен быть уникальным.
После успешной регистрации происходит автоматическая аутентификация пользователя.
Для передачи аутентификационных данных используется механизм _cookies_.

Формат запроса:

    POST /api/user/register HTTP/1.1
    Content-Type: application/json
    ...
    
    {
    "login": "<login>",
    "password": "<password>"
    }

Коды ответа:

- 200 — пользователь успешно зарегистрирован и аутентифицирован;
- 400 — неверный формат запроса;
- 409 — логин уже занят;
- 500 — внутренняя ошибка сервера.

### Аутентификация пользователя

Хендлер: **POST /api/user/login**.

Аутентификация производится по паре логин/пароль.
Для передачи аутентификационных данных используется механизм cookies.

Формат запроса:

    POST /api/user/login HTTP/1.1
    Content-Type: application/json
    ...
    
    {
    "login": "<login>",
    "password": "<password>"
    }

Коды ответа:

- 200 — пользователь успешно аутентифицирован;
- 400 — неверный формат запроса;
- 401 — неверная пара логин/пароль;
- 500 — внутренняя ошибка сервера.

### Создание секрета
- POST /api/user/secrets — создание секрета;

Формат запроса:

    POST /api/user/secrets HTTP/1.1
    Content-Type: application/json
    ...

Коды ответа:
----

- GET /api/user/secrets/{id} — получение списка секретов;
- PUT /api/user/secrets/{id} — обновление секрета;
- DELETE /api/user/secrets/{id} — удаление секрета;
- POST /api/user/secrets/sync - синхронизация секретов.

# Клиент

## CLI

### Получение информацию о версии приложения клиента

    ./gophkeeper-client version

### Синхронизация данных
    
    ./gophkeeper-client sync

### Регистрация пользователя
    
    ./gophkeeper-client register -u user_name
    
### Аутентификация пользователя

    ./gophkeeper-client login -u user_name

## Управление секретами

### Добавление учетных данных

    ./gophkeeper-client secret add credentials -n "name" -l "login" -e "note"

### Добавление текстовых данных

    ./gophkeeper-client secret add text -n "name" -c "content" -e "note"

### Добавление бинарных данных

    ./gophkeeper-client secret add binary -n "name" -p "file_name" -e "note"

### Добавление банковской карты

    ./gophkeeper-client secret add card -n "name" -e "note"

### Просмотр секрета

    ./gophkeeper-client secret get <secret_id>

### Удаление секрета

    ./gophkeeper-client secret delete <secret_id>

